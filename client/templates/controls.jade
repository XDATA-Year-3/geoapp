mixin standardPanel(panel_id, content_id, title, tooltip)
  .panel-group(id=panel_id, class!=attributes .class)
    .panel.panel-default
      .panel-heading
        a(data-toggle="collapse", data-parent="#"+panel_id,
            href="#"+content_id)
          .panel-title
            b= title
            i.icon-info-circled(data-placement="bottom", data-container="body",
                title=tooltip)
            i.icon-down-open.open-icon.toggle-icon
            i.icon-up-open.close-icon.toggle-icon
      .panel-collapse.collapse.in(id=content_id)
        .panel-body
          if block
            block
          else
            p No Content

#ga-main-page.ga-main-ui
  +standardPanel('ga-filter-settings-panel', 'ga-filter-settings', 'Filters',
      "Filters select which data is available to be displayed.  After adjusting the settings, select Filter to load the new data.",
      true)
    include taxifilters.jade
    include instagramfilters.jade
  +standardPanel('ga-display-settings-panel', 'ga-display-settings', 'Display',
      "These parameters update the display as soon as they are changed.  They do not affect what data is used, only how it appears.")
    .form-group
      label(for="ga-tile-set") Map Source
      select#ga-tile-set.form-control.input-sm(title="Map Source",
          taxifield="display-tile-set")
        option(value="mqsat") MapQuest Satellite
        option(value="mapquest") MapQuest Map
        option(value="openstreetmap") OpenStreetMap
        option(value="tonerlite") Stamen Toner Lite
        option(value="stamenterrain") Stamen Terrain
        option(value="blank") Blank
      label.ga-slider-label(for="ga-tile-opacity",
          title="Map layer opacity") Opacity
      input#ga-tile-opacity.form-control.input-sm.ga-slider-ctl(
          type="text", data-slider-min="0.1", data-slider-max="1",
          data-slider-step="0.05", data-slider-value="0.5",
          data-slider-handle="square",
          data-slider-id="ga-tile-opacity-ctl",
          taxifield="display-tile-opacity", taxitype="float")
    .form-group.hidden
      label(for="ga-display-date") Date
      input#ga-display-date.form-control.input-sm(
        type="text", placeholder="YYYY-MM-DD hh:mm - YYYY-MM-DD hh:mm",
        title="Display date range",
        taxifield="display-date", taxitype="dateRange")
    .form-group
      label(for="ga-display-type") Display Type
      select#ga-display-type.form-control.input-sm(title="Display Type",
          taxifield="display-type")
        option(value="pickup") Pickup Locations
        option(value="dropoff") Dropoff Locations
        option(value="both") Pickup - Dropoff Locations
        option(value="vector") Pickup - Dropoff Vectors
    .form-group
      label(for="ga-display-process") Processing
      select#ga-display-process.form-control.input-sm(title="Processing",
          taxifield="display-process")
        option(value="raw") Individual Trips
        option(value="binned") Binned Heatmap
    .form-group
      span#ga-display-max-points-group
        label.ga-slider-label(for="ga-display-max-points",
          title="Maximum number trip points to display.") Max Points
        input#ga-display-max-points.form-control.input-sm.ga-slider-ctl(
            type="text", data-slider-min="10000",
            data-slider-max="1000000", data-slider-step="5000",
            data-slider-value="25000", data-slider-handle="square",
            data-slider-scale="logarithmic",
            data-slider-id="ga-display-max-points-ctl",
            taxifield="display-max-points", taxitype="int")
      span#ga-display-max-lines-group.hidden
        label.ga-slider-label(for="ga-display-max-lines",
          title="Maximum number of trip vectors to display.") Max Vectors
        input#ga-display-max-lines.form-control.input-sm.ga-slider-ctl(
            type="text", data-slider-min="5000",
            data-slider-max="150000", data-slider-step="5000",
            data-slider-value="10000", data-slider-handle="square",
            data-slider-scale="logarithmic",
            data-slider-id="ga-display-max-lines-ctl",
            taxifield="display-max-lines", taxitype="int")
      span#ga-display-num-bins-group.hidden
        label(for="ga-display-num-bins") Bins
        input#ga-display-num-bins.form-control.input-sm.ga-slider-ctl(
            type="text", data-slider-min="5",
            data-slider-max="30", data-slider-step="1",
            data-slider-value="15", data-slider-handle="square",
            data-slider-id="ga-display-num-bins-ctl",
            taxifield="display-num-bins", taxitype="int")
        button#ga-display-update.btn.btn-default.btn-sm.hidden
          i.icon-cw
          |  Update Bins
      label.ga-slider-label(for="ga-data-opacity",
        title="Opacity of points and vectors.") Opacity
      input#ga-data-opacity.form-control.input-sm.ga-slider-ctl(
          type="text", data-slider-min="0.004",
          data-slider-max="1", data-slider-step="0.004",
          data-slider-value="0.1", data-slider-handle="square",
          data-slider-id="ga-data-opacity-ctl",
          data-slider-scale="logarithmic",
          taxifield="data-opacity", taxitype="float")
    .form-group
      label Show
      span(title="Show taxi trip data")
        input#ga-show-taxi-data.form-control.input-sm(
          type="checkbox", checked="checked",
          taxifield="show-taxi-data", taxitype="boolean")
        label(for="ga-show-taxi-data") Taxi
      span(title="Show instagram and twitter message data")
        input#ga-show-instagram-data.form-control.input-sm(
          type="checkbox", checked="checked",
          taxifield="show-instagram-data", taxitype="boolean")
        label(for="ga-show-instagram-data") Messages
    .form-group#ga-general-legend
      .ga-legend-item.legend-taxi.legend-taxi-pickup.taxi-raw.hidden
        i.icon-circle
        | Pickup
      .ga-legend-item.legend-taxi.legend-taxi-dropoff.taxi-raw.hidden
        i.icon-circle
        | Dropoff
      .ga-legend-item.legend-taxi.legend-taxi-both.taxi-raw.pickup.hidden
        i.icon-circle
        | Pickup
      .ga-legend-item.legend-taxi.legend-taxi-both.taxi-raw.dropoff.hidden
        i.icon-circle
        | Dropoff
      .ga-legend-item.legend-taxi.legend-taxi-vector.taxi-raw.pickup.hidden
        .legend-vector
        | Pickup 
      .ga-legend-item.legend-taxi.legend-taxi-vector.taxi-raw.dropoff.hidden
        .legend-vector
        | Dropoff
      .ga-legend-item.legend-taxi.legend-taxi-pickup.taxi-binned.hidden
        i.icon-stop
        | Many Pickups
      .ga-legend-item.legend-taxi.legend-taxi-pickup.taxi-binned.faint.hidden
        i.icon-stop
        | Few Pickups
      .ga-legend-item.legend-taxi.legend-taxi-dropoff.taxi-binned.hidden
        i.icon-stop
        | Many Dropoffs
      .ga-legend-item.legend-taxi.legend-taxi-dropoff.taxi-binned.faint.hidden
        i.icon-stop
        | Few Dropoffs
      .ga-legend-item.legend-taxi.legend-taxi-both.legend-taxi-vector.pickup.taxi-binned.hidden
        i.icon-stop
        | Many More Pickups
      .ga-legend-item.legend-taxi.legend-taxi-both.legend-taxi-vector.pickup.taxi-binned.faint.hidden
        i.icon-stop
        | A Few More Pickups
      .ga-legend-item.legend-taxi.legend-taxi-both.legend-taxi-vector.dropoff.taxi-binned.faint.hidden
        i.icon-stop
        | A Few More Dropoffs
      .ga-legend-item.legend-taxi.legend-taxi-both.legend-taxi-vector.dropoff.taxi-binned.hidden
        i.icon-stop
        | Many More Dropoffs
      .ga-legend-item.legend-messages.hidden
        i.icon-circle
        | Messages
    .form-group#ga-place-group
      //- The place buttons are taken from the ini settings or defaults
        based on this template
      button#ga-place-template.btn.btn-info.btn-sm.ga-place.hidden
        i.icon-target
  +standardPanel('ga-anim-settings-panel', 'ga-anim-settings', 'Animation',
      "After changing animation parameters, select Update to use the new values.")
    .form-group
      label(for="ga-cycle") Cycle
      select#ga-cycle.form-control.input-sm(title="Animation cycle (for example, selecting Day means that all days are combined together so you can see what happens on the average day)",
          taxifield="cycle")
        option(value="none") Entire Range
        //- option(value="year") Year
        //- option(value="month") Month
        option(value="week") Week
        option(value="day") Day
        //- option(value="hour") Hour
      label(for="ga-cycle-group") Window
      select#ga-cycle-group.form-control.input-sm(title="Show data for this time interval during each frame of the animation",
          taxifield="cycle-group")
        option(value="week") Week
        option(value="day") Day
        option(value="3-hour") 3 Hours
        option(value="hour") Hour
    .form-group
      label(for="ga-cycle-duration") Duration
      select#ga-cycle-duration.form-control.input-sm(title="Duration of complete animation cycle",
          taxifield="cycle-duration")
        option(value="10-s") 10 seconds
        option(value="15-s") 15 seconds
        option(value="30-s") 30 seconds
        option(value="1-m") 1 minute
        option(value="2-m") 2 minutes
      label(for="ga-cycle-framerate") Rate
      select#ga-cycle-framerate.form-control.input-sm(title="Maximum framerate.  Stepped shows each time group discretely.",
          taxifield="cycle-framerate")
        option(value="stepped") Stepped
        option(value="5") 5 fps
        option(value="10") 10 fps
        option(value="30") 30 fps
    .form-group
      button#ga-anim-update.btn.btn-default.btn-sm
        i.icon-cw
        |  Update
      button#ga-play.btn.btn-default.btn-sm(taxifield="playState", value="stop")
        span.canplay
          i.icon-play
          |  Play
        span.canpause
          i.icon-pause
          |  Pause
      button#ga-anim-step-back.btn.btn-default.btn-sm(title="Step back")
        i.icon-to-start
      button#ga-anim-step.btn.btn-default.btn-sm(title="Step forward")
        i.icon-to-end
      button#ga-anim-stop.btn.btn-default.btn-sm
        i.icon-stop
        |  Stop
    .form-group
      input#ga-step-slider.form-control.input-sm.ga-slider-ctl-custom(
          type="text", data-slider-min="0", data-slider-max="100",
          data-slider-step="1", data-slider-value="0",
          data-slider-handle="square", data-slider-tooltip="hide",
          data-slider-id="ga-step-slider-ctl")
    .form-group
      label Current Display
      span#ga-cycle-anim.input-sm Full Data

a#ga-help(href="built/docs/index.html", target="_blank",
    title="Show help page", data-placement="right")
  button
    i.icon-help-circled

include results.jade
